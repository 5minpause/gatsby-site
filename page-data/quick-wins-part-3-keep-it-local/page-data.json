{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/quick-wins-part-3-keep-it-local","result":{"data":{"post":{"__typename":"MdxPost","slug":"/quick-wins-part-3-keep-it-local","title":"Quick wins, part 3: Keep it local","date":"06.03.2019","tags":null,"description":null,"canonicalUrl":null,"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"layout\": \"post\",\n  \"title\": \"Quick wins, part 3: Keep it local\",\n  \"categories\": \"article\",\n  \"date\": \"2019-03-06 16:24:00 +0200\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Yesterday I closed with this idea:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Spot places where knowledge about something does not belong.\")), mdx(\"p\", null, \"What do I mean by that? Sometimes I come across some code that does not read right. I will use a pseudo code example to illustrate:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ruby\"\n  }, \"class Foo\\n  def initialize(bar_service)\\n    @bar_service = bar_service\\n  end\\n\\n  def quux\\n    if @bar_service.greeting == \\\"hello\\\"\\n      @bar_service.greet(\\\"goodbye\\\")\\n    else\\n      @bar_service.greet(\\\"hello\\\")\\n    end\\n  end\\nend\\n\\nclass BarService\\n  attr_accessor :greeting\\n  def greet(message)\\n    @greeting = message\\n  end\\nend\\n\")), mdx(\"p\", null, \"What bothers me with this code? The method \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"quux\"), \" has too much knowledge about how the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"@bar_service\"), \" works. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Foo.quux\"), \" knows that the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"@bar_service\"), \" has an instance variable called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"greeting\"), \" and at least one specific value it might have (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"hello\\\"\"), \"). It also knows two values that the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"greet()\"), \" method might be called with.\\nNow it happens that this knowledge about how the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"greeting\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"greet\"), \" work, is also spread into other parts of the application. What happens if you need to change something about the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"greet()\"), \" method? You have to find every place in your application and update it to reflect the new changes.\\nThis isn't good.\"), mdx(\"p\", null, \"There are places like this inside many applications. You might need some practice to spot them, but with some practice it becomes easier. For this example I would like to suggest to move all knowledge about how \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"greeting\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"greet\"), \" work inside the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"BarService\"), \". Start with the conditional, like this:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ruby\"\n  }, \"class Foo\\n  def initialize(bar_service)\\n    @bar_service = bar_service\\n  end\\n\\n  def quux\\n    @bar_service.greet\\n  end\\nend\\n\\nclass BarService\\n  attr_accessor :greeting\\n  def greet\\n    if @greeting == \\\"hello\\\"\\n      @greeting = \\\"goodbye\\\"\\n    else\\n      @greeting = \\\"hello\\\"\\n    end\\n  end\\nend\\n\")), mdx(\"p\", null, \"Now we are free to change the internals of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"greet\"), \" method. We could add a third option or change it completely. The class \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Foo\"), \" does not need to change at all. It continues to call \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"greet\"), \" as if nothing has happened.\"), mdx(\"p\", null, \"One of my overarching topics is testing. A refactoring like this should be covered with tests. Not only do you need tests for the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Foo\"), \" class, but also for how \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"BarService.greet\"), \" works. And for every part of the app that interacts with either.\"), mdx(\"p\", null, \"Tomorrow we'll look at another way to do a refactoring.\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Yesterday I closed with this idea: Spot places where knowledge about something does not belong. What do I mean by that? Sometimes I comeâ€¦","timeToRead":1,"banner":null}},"pageContext":{"slug":"/quick-wins-part-3-keep-it-local","formatString":"DD.MM.YYYY"}},"staticQueryHashes":["3090400250","3090400250","318001574"]}