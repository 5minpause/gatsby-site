{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/when-is-the-right-time-to-break-something","result":{"data":{"post":{"slug":"/when-is-the-right-time-to-break-something","title":"When is the right time to break something?","date":"09.08.2019","tags":null,"description":null,"canonicalUrl":null,"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"layout\": \"post\",\n  \"title\": \"When is the right time to break something?\",\n  \"categories\": \"article, code review, quality\",\n  \"date\": \"2019-08-09T00:00:00.000Z\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Please excuse this sensational headline. I am referring to classes in your software and to their design. But also to tests, but see below\\u2026\"), mdx(\"h2\", null, \"Work\"), mdx(\"p\", null, \"The past week I mainly tried to pair with my fellow developers to impart some knowledge onto them. We worked together on integration tests with Nightwatch.js which is something like Capybara from the Ruby world. A question that came up was \\\"when do we stop testing?\\\"\"), mdx(\"p\", null, \"I have to share some details about our setup: We created a React application for the frontend and use the APIs provided by the backend developers. Those APIs are sometimes flaky. And generally it would be a bad idea to access them during the tests. This is because they would introduce a dependency in your tests that is outside of your control. Do you want to have your tests fail, because somebody changed something inside the APIs? And would you like your tests to succeed, regardless of whether the API was accessible or not?\"), mdx(\"p\", null, \"The answer for both question is \\\"yes\\\". The first type of test is a system test, where you do a complete blackbox-style test of your system for (mostly) functional requirements. If the API changes, you would want to know. And you would like to have your tests fail and notify you of that change. \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Well, you would want the backend dev to notify you beforehand, but still\\u2026\")), mdx(\"p\", null, \"The second type of test I was describing is an integration test. You want to find out whether the code you wrote tries to access the API in the required way and whether your software behaves as specified for the API's responses. But you don't need the actual API for that. You should use a MOCK API that replaces the real API and behaves just the same. And this mocked API should be under your control.\"), mdx(\"p\", null, \"So much for the details. Because we wrote integration tests against the mocked API. We sent a request to get data, let's call it a widget and we specified it by its ID.\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GET /widgets/123-567-890 => widget.json\")), mdx(\"p\", null, \"We received JSON and displayed the widget in a form, so the user is able to edit it.\"), mdx(\"p\", null, \"In this test, we edit a widget's category only. We send a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PUT\"), \" request with the whole object, even though we only update the category (A \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PATCH\"), \" would be enough, but this is what the API specified\\u2026). We send the request to our mocked API. Since this was the \\\"happy path\\\" testing, we received a response that indicated a success. \\uD83C\\uDF89\"), mdx(\"p\", null, \"A bit more of background:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Back in our UI, where we display the widget, we do not display the category.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"When we get a successful response for the request, we update the internal state of the app (we don't use Redux). So we \\\"save\\\" the category.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"When we open the form the edit the widget, we fetch data from the API first and display that to edit.\")), mdx(\"p\", null, \"Now the question was: \\\"Where do we stop testing?\\\"\\nSince we mock the successful response anyway, do we test that we update the internal state with the widget? But we don't use or display that state (the updated category) anyway?!\"), mdx(\"p\", null, \"I want to say, I had to think about this for a while. I wasn't sure what the best way would be. One answer could've been to display the edited category somewhere accessible for the test (perhaps as a data-attribute). But where's the business value in that?\"), mdx(\"p\", null, \"A better answer turned out to be:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"For the happy path test for a successful response and be done\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Add tests for the failure case of unsuccessful responses\")), mdx(\"p\", null, \"And the test and it's questions revealed another thing: We do not need to store the updated category right now. The person who wrote that code did it with a possible future requirement in mind. But it wasn't and isn't necessary right now. But since they didn't use TDD to create the code and its design, they didn't notice.\"), mdx(\"p\", null, \"So that's one more history for \\\"tests help increase the quality of code and design\\\".\"), mdx(\"p\", null, \"This is already long and I wanted to share something on the size of classes and when to refactor them. I guess this has to wait for the next issue.\"), mdx(\"h3\", null, \"Talks/webinars\"), mdx(\"p\", null, \"This topic from last week resonated with you. Thanks for the many responses. I will take you up on your offers and put you in a virtual crowd using Zoom, next time I am doing something like this.\"), mdx(\"h2\", null, \"Personal\"), mdx(\"p\", null, \"Fixed gear bikes seem to be a favorite for many readers. I hadn't anticipated that you would have experience riding these. I was glad I shared it.\"), mdx(\"p\", null, \"On a completely unrelated note: In the future I will factor into my selection of clients whether they have a shower in their office or not. Having access to one helps me tremendously to combine my training plans into my working plans. Just yesterday I was able to do an intense interval running training \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"on my way to my client\"), \" because I knew I could shower afterwards. The alternative would have been to do it in the evening. But I'd rather spent the evening \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"with my family\"), \" instead. So this really increases my happiness.\"), mdx(\"p\", null, \"Another personal endeavor of mine is to decrease my reliance on external/3rd party solutions for syncing data and storing it. This means stuff like iCloud and Dropbox but also other proprietary solutions inside apps that I use, e.g. DayOne.app\"), mdx(\"p\", null, \"If I write my thoughts for years and years, I do not want to rely on some business to be able to access it. Same with my own business content. I mostly write code and articles, but also thoughts on strategy and lots of other things. I plan my business for the long run, which means I want to be able to access these things forever.\"), mdx(\"p\", null, \"That's why I begin to turn away from iCloud and friends. I don't use Ulysses anymore for writing, but \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://joplinapp.org/\"\n  }, \"Joplin\"), \". I run my own cloud service (Nextcloud) and sync all my encrypted plain text files to the cloud and between my devices. That way I can tripple-back-up everything. Joplin is FOSS. I can save the source code in its current state (you bet I already did!) and will be able to access my notes for as long as I have a computer.\"), mdx(\"p\", null, \"So I started migrating my data from the different apps I used to Joplin. This is an ongoing task and I also began to write an Importer to do this automatically. I have thousands of entries and notes in DayOne and other apps. It's quite a challenge. But this makes sense to me.\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Please excuse this sensational headline. I am referring to classes in your software and to their design. But also to tests, but see belowâ€¦","timeToRead":4,"banner":null}},"pageContext":{"slug":"/when-is-the-right-time-to-break-something","formatString":"DD.MM.YYYY"}},"staticQueryHashes":["2744905544","3090400250","318001574"]}