{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/automating-tasks-on-mac-os","result":{"data":{"post":{"__typename":"MdxPost","slug":"/automating-tasks-on-mac-os","title":"Automating tasks on MacOS","date":"02.12.2021","tags":[{"name":"automation","slug":"automation"}],"description":null,"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"layout\": \"post\",\n  \"title\": \"Automating tasks on MacOS\",\n  \"categories\": \"article\",\n  \"date\": \"2021-12-02 16:26:58 +0100\",\n  \"tags\": [\"automation\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Automation has been a favorite past-time of mine since forever. I wrote about \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/my-automated-publishing-workflow\"\n  }), \"how I automated the publishing workflow\"), \" of this site, back when it ran a different setup. Automation is a big topic in my work for my clients, as well. Setting up automations to run test suites, or deploying applications. Stuff like that.\\nAnything that you do more than twice might be a candidate for automation.\"), mdx(\"p\", null, \"This site runs on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.com\"\n  }), \"Gatsby.js\"), \" now. So that automation from before doesn't work any longer. But making it easier to write, makes me write more often. Lowering the barrier makes it easier to start. So that's what I was trying to do now.\"), mdx(\"p\", null, \"Here are the steps for writing a blog post for this site:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Open an editor (e.g. VS Code) with the Git reposiory of the site\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Create a new folder under \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/content/posts\"), \" that has the name of the article, in lower case letters where spaces are replaced with dashes. That looks like this: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/content/posts/automating-tasks-on-macos\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Create a \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"index.mdx\"), \" file with \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.com/docs/mdx/writing-pages/#using-frontmatter-in-mdx\"\n  }), \"\\\"frontmatter\\\"\"), \" that looks like this:\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yml\"\n  }), \"---\\nlayout: post\\ntitle: \\\"Automating tasks on MacOS\\\"\\ncategories: article\\ndate: 2021-12-02 16:26:58 +0100\\n---\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The frontmatter needs the title and the current date.\")), mdx(\"p\", null, \"Until today, I did all of that manually! What a hassle. No wonder, I posted rarely.\"), mdx(\"h3\", null, \"Automation tools\"), mdx(\"p\", null, \"There are a lot of tools you could use. I settled for a simple, portable solution consisting of two parts:\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"1) Bunch.app\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"2) A Ruby script  \"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://bunchapp.co\"\n  }), \"Bunch.app\"), \" was created by \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://brettterpstra.com\"\n  }), \"Brett Terpstra\"), \" as automation tool for MacOS. It lives in my menu bar where I can access it quickly. I could also create a keyboard shortcut to invoke my automation. Maybe that will come next, after I used a few times and become annoyed of clicking around.\"), mdx(\"h4\", null, \"The Bunch script\"), mdx(\"p\", null, \"This is the contents of the Bunch script:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"---\\ntitle: Write new blog post\\n---\\n\\n# Hide all apps\\n@@\\n\\nblog_title = ?\\\"Title of bog post\\\"\\n\\n$ cd /Users/holgerfrohloff/projects/self/gatsby-site/ && ruby create_post_template.rb \\\"%{blog_title}\\\"\\n\\n$ code /Users/holgerfrohloff/projects/self/gatsby-site\\n\")), mdx(\"p\", null, \"Here's what it does:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Hide all open apps  \"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Create a dialog where I can put in the title of the post I'll write\\n\", mdx(\"span\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"744px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"89.58333333333334%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAADkUlEQVQ4y7WUW0gcVxiAx4kuWYVCmqUX6ENBiramDz5oQ6slDWuU+KJ0+9CXFhHahyQiRJJScev6oEYbvERFTB4SYtqtoU0qMbq6Nzd7nd2dy85tLxGxSyzWhxaytDRx5u9/xjQhxbah0AMf/8z/n/nmP3OGQ9XU1FBkzMzMUP91DA0NPZ1obW0loairq6sMi5be3t6DDkevxeHos/TYP7ec7emwnOk5aem2nzVypIZzLIODgxa73f4ceba6unpX5vf7jdje3n6A47iAKIpbqVRqA8mnUkJeFKW8LGbyipjNS6Ji5HZrqR+Qe4IgKGNjY68Sh8vlKqKcTmcRuWlrayvnef6X9fV1yGQyBrnsXRDkOKymroOXvwZJKYS5tSf1XA5UVYWBgYHDxDE7O0uTb0eE+5qbm1/HDrfS6TRIkrQjSaKWUXPaUtCpXXF3a1c9PdoN37SRIzWco8myrOOKHuCnqkcHPTExQVOTk5NEWNzU1HSIZdlt8mYyWZREyKbX4DvXZei7+BGcu/wpXLnxJeQya4ASMkdXFIVc73R2dh4hTY2MjNDU1NSUIWxsbHxKiOCyssALLNxyO+GWxwnxZMTIkdpewtHR0b8X4nIgEolANBoFLikYJBJJiMVijzqUdflZhLlsFlCmqWoa3G43LCwswPLyMtz8/ibMz8/DCuaIELvTVfUfhA0NjYd4nt2OsllYucNr3iAPqxHxMb6IBN6wiEjgCQrgCgi6L6riy6Wdjo49hFYUCjy3HWbvgucOp62GOfCFWPAFWfAioTADsQgD0UeEQ4zOxEXIKOLOiVN7LRl3OZlM/sRyAgRCCW01GNcD4QSS1GMMp1/1b+hDt3/ULyxv6pMrm/r5xU1tYuUehFnl4WenTz3Z5enpaeM/bGlpeTORSPwcCARg8fYCOL/+CubmnLC0tARsxAfHLv0GVDfAC+cA3rgAQH8BUOwAuBbYgKm+k0eJY3x8nKaGh4eNDmtra1/DXVVQ+jvDMPfj8XiBEIsxhUScKSwGU4U5r4xIhW88UuG6T7r/rV/+NcywW5+0f1xLHP39/TRlNpupsrKyEkwcPIzDarW21NXV2f6kvr7e9g7G4++9ZbM11NjeRz44ths/PP52q/VI3bv47IvFNGUqLS19fODQJpPJjPEA8hLyyjPyMvJ88T6amOi/Hmt0ZWWlCdlfXl5OMP8bFRUV+6uqqkwlJSU09X+NPwBciaqXdBQ1dwAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"dialog\",\n    \"title\": \"dialog\",\n    \"src\": \"/static/2309b9bb85f26db8c3cfa8910bbef0a7/f2f9b/dialog.png\",\n    \"srcSet\": [\"/static/2309b9bb85f26db8c3cfa8910bbef0a7/5243c/dialog.png 240w\", \"/static/2309b9bb85f26db8c3cfa8910bbef0a7/ab158/dialog.png 480w\", \"/static/2309b9bb85f26db8c3cfa8910bbef0a7/f2f9b/dialog.png 744w\"],\n    \"sizes\": \"(max-width: 744px) 100vw, 744px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \"), \"\\n(See that error in the word \\\"blog\\\"? oops\\u2026 \\uD83D\\uDE07)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Change into my working directory\"), \" - the dir of the repository\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Invoke the Ruby script (see below) and pass along the title from (2)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Open VS Code with my repo.\")), mdx(\"p\", null, \"I first tried to run the script like this:\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ruby /Users/holgerfrohloff/projects/self/gatsby-site/create_post_template.rb \\\"%{blog_title}\\\"\"), \".  \"), mdx(\"p\", null, \"That didn't work because of how MacOS shields the system volume from write access.\\nIf you've ever gotten the error `\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mkdir': Read-only file system @ dir_s_mkdir - content (Errno::EROFS)\"), \" or something similar, this is that problem. You are not allowed to write to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/\"), \". Since I executed the script from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/\"), \" by calling it with an absolute path, it couldn't create a new directory or files.\\nChanging the working directory before calling the script evaded that issue.\"), mdx(\"p\", null, \"In step (5) I open VS Code with the repo. Technically, you could tell Bunch to open VS Code using a different syntax, where you name the app that you'd like to open. But I could not get this to work reliably. So I use the command line helper \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"code\"), \" to open the app. That works all the time.\"), mdx(\"h4\", null, \"The Ruby script\"), mdx(\"p\", null, \"The Ruby script is quite simple:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-ruby\"\n  }), \"#!/usr/bin/env ruby\\n# frozen_string_literal: true\\n\\nrequire \\\"fileutils\\\"\\n\\n# first argument is the title\\ntitle = ARGV[0]\\n\\n# exchange percent-encoded spaces for spaces\\ncleaned_title = title.gsub(/%20/, ' ')\\n# exchange spaces for dashes\\ndirname    = cleaned_title.gsub(/\\\\s+/, '-').downcase\\npath       = \\\"content/posts/#{dirname}\\\"\\nfilename   = \\\"#{path}/index.mdx\\\"\\ncategories = \\\"article\\\"\\n\\nunless File.exist?(path)\\n  begin\\n    FileUtils.mkdir_p(path)\\n    puts \\\"just made the following dir #{path}\\\"\\n  rescue Errno::EACCES => e\\n    abort \\\"Failed to create #{path}: #{e.message}\\\"\\n  rescue Errno::EEXIST\\n    puts \\\"Directory #{path} already exists\\\"\\n  end\\nend\\nFile.open(filename, \\\"w+\\\") do|file|\\n  file.write(\\n    \\\"---\\nlayout: post\\ntitle: \\\\\\\"#{cleaned_title}\\\\\\\"\\ncategories: #{categories}\\ndate: #{Time.now.strftime(\\\"%Y-%m-%d %H:%M:%S %z\\\")}\\n---\\\"\\n  )\\nend\\n\")), mdx(\"p\", null, \"It take the incoming title from the command line as argument and modifies it slightly. Bunch encodes spaces as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"%20\"), \". For the title in the frontmatter, I'd like to have actual spaces. For the dir name I need dashes. So that's that.\\nThen I use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"File\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"FileUtils\"), \" from the Ruby Standard library to create the directory and the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.mdx\"), \".\"), mdx(\"p\", null, \"The last part is about putting in the frontmatter with the right title and date. I could even get wild with tags or categories, but I prefer not to. At least right now.\"), mdx(\"h4\", null, \"What's missing\"), mdx(\"p\", null, \"I don't yet have a way to open the newly created file in VS Code after starting the app. If you know of a way, please let me know on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/5minpause\"\n  }), \"Twitter\"), \".\"), mdx(\"p\", null, \"Here's to more posts from me going forward.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"\\uD83D\\uDC4B\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Automation has been a favorite past-time of mine since forever. I wrote about  how I automated the publishing workflow  of this site, back…","timeToRead":2,"banner":null}},"pageContext":{"slug":"/automating-tasks-on-mac-os","formatString":"DD.MM.YYYY"}},"staticQueryHashes":["3090400250","3090400250","318001574"]}